<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yada Yah Translation Entry</title>
    <link rel="stylesheet" href="css/app.css?v=9">
</head>
<body>
    <!-- Login -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <h1>Yada Yah Translations</h1>
            <div id="login-error" class="error-messages" style="display: none;"></div>
            <div class="field">
                <label for="login-user">Login</label>
                <input type="text" id="login-user" autocomplete="username">
            </div>
            <div class="field">
                <label for="login-pass">Password</label>
                <input type="password" id="login-pass" autocomplete="current-password">
            </div>
            <button id="btn-login" class="btn btn-primary" style="width:100%;margin-top:8px;">Sign In</button>
        </div>
    </div>

    <!-- App (hidden until authenticated) -->
    <div id="app" class="container" style="display: none;">
        <div class="app-header">
            <nav class="nav-tabs">
                <a href="admin-translation.html" class="nav-tab active">Translation</a>
                <a href="admin-word.html" class="nav-tab">Word</a>
                <a href="admin-lookups.html" class="nav-tab">Lookups</a>
            </nav>
            <div class="user-info">
                <span id="user-display"></span>
                <button id="btn-logout" class="btn btn-secondary btn-sm">Logout</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-bar">
            <button class="tab-btn active" data-tab="list">List</button>
            <button class="tab-btn" data-tab="entry">Entry</button>
        </div>

        <!-- ══ ENTRY TAB ══ -->
        <div id="tab-entry" class="tab-content">
            <!-- Scripture Reference -->
            <div class="card">
                <div class="dropdown-row">
                    <div class="field">
                        <label for="scroll">Scroll</label>
                        <select id="scroll">
                            <option value="">-- Select --</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="chapter">Chapter</label>
                        <select id="chapter" disabled>
                            <option value="">All</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="verse">Verse</label>
                        <select id="verse" disabled>
                            <option value="">All</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Translations List for selected verse -->
            <div id="translations-section" class="card" style="display: none;">
                <div class="translations-header">
                    <h2 id="translations-title">Translations</h2>
                    <button id="btn-add" class="btn btn-primary">Add New Translation</button>
                </div>
                <div id="translations-list"></div>
                <div id="imported-translations-section" style="display: none;">
                    <h3 id="imported-translations-title" class="imported-title">Published Translations</h3>
                    <div id="imported-translations-list"></div>
                    <div id="word-link-status" style="font-size:0.8rem;color:#888;margin-top:8px;"></div>
                </div>
            </div>

            <!-- Translation Entry Form -->
            <div id="form-section" class="card" style="display: none;">
                <h2 id="form-title">New Translation</h2>
                <div id="form-errors" class="error-messages" style="display: none;"></div>

                <input type="hidden" id="editing-key" value="">

                <div class="dropdown-row">
                    <div class="field">
                        <label for="series">Series</label>
                        <select id="series">
                            <option value="">-- Select --</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="volume">Volume</label>
                        <select id="volume" disabled>
                            <option value="">-- Select --</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="yy-chapter">YY Chapter</label>
                        <select id="yy-chapter" disabled>
                            <option value="">-- Select --</option>
                        </select>
                    </div>
                </div>

                <div class="inline-row">
                    <div class="field field-sm">
                        <label for="page">Page</label>
                        <input type="number" id="page" min="1">
                    </div>
                    <div class="field field-sm">
                        <label for="paragraph">Paragraph</label>
                        <input type="number" id="paragraph" min="1">
                    </div>
                    <div class="field field-sm">
                        <label for="translation-date">Translation Date</label>
                        <input type="date" id="translation-date">
                    </div>
                    <div class="field field-sm">
                        <label for="sort">Sort</label>
                        <input type="number" id="sort" min="0" value="0">
                    </div>
                </div>

                <div class="field">
                    <label for="translation-text">Text</label>
                    <textarea id="translation-text"></textarea>
                </div>

                <div class="button-row">
                    <button id="btn-save" class="btn btn-primary">Save</button>
                    <button id="btn-cancel" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- ══ LIST TAB ══ -->
        <div id="tab-list" class="tab-content active">
            <div class="card">
                <div class="translations-header">
                    <h2>All Translations</h2>
                    <div style="display:flex;gap:8px;">
                        <button id="btn-load-all" class="btn btn-primary">Load All</button>
                        <button id="btn-add-from-list" class="btn btn-primary">Add Translation</button>
                    </div>
                </div>
                <div class="table-wrap">
                    <table id="translations-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-col="yah_scroll_label_yy" data-sort-key="yah_scroll_sort">Scroll (YY)</th>
                                <th class="sortable" data-col="yah_scroll_label_common" data-sort-key="yah_scroll_sort">Scroll</th>
                                <th class="sortable" data-col="yah_chapter_number">Chapter</th>
                                <th class="sortable" data-col="yah_verse_number">Verse</th>
                                <th class="sortable" data-col="series_display" data-sort-key="yy_series_sort">Series</th>
                                <th class="sortable" data-col="volume_display" data-sort-key="yy_volume_number">Volume</th>
                                <th class="sortable" data-col="yy_translation_page">Page</th>
                                <th class="sortable" data-col="yy_ch_number" data-sort-key="yy_chapter_sort">YY Ch</th>
                                <th>Actions</th>
                            </tr>
                            <tr class="filter-row">
                                <th><select class="col-filter" data-col="yah_scroll_label_yy"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="yah_scroll_label_common"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="yah_chapter_number"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="yah_verse_number"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="series_display"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="volume_display"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="yy_translation_page"><option value="">All</option></select></th>
                                <th><select class="col-filter" data-col="yy_ch_number"><option value="">All</option></select></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="translations-tbody"></tbody>
                    </table>
                </div>
                <div id="list-empty" class="no-translations" style="display:none;">No translations found.</div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="js/tinymce/tinymce.min.js"></script>
    <script src="js/app.js?v=9"></script>
</body>
</html>
